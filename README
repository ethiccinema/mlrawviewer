About
-----

MlRawViewer is a cross-platform viewer for raw video files produced by the Magic Lantern add-on software
for Canon DSLR cameras. (See http://www.magiclantern.fm/ for more details).

It supports both the original RAW format, and the newer MLV (RAW v2.0) format in both
single and multi-file versions.

It can also act as a front end to ffmpeg for encoding raw files into another video
format such as ProRes.

The program is written in python, and makes use of OpenGL for image processing in order to be 
able to display videos at their intended frame rate. This also depends on you having
good file read speed in your computer.

It has mainly been developed and tested on Linux, but it has also been used on Mac and Windows. 
However, it does currently assume you are able to set up the python runtime yourself. 
(For Mac and Windows you might find other alternatives which are easier to get going).

License
-------

The software is supplied under a BSD-style license. See the source code.

Installation
------------
1. You need python 2.7 or later python 2 release, not python 3

2. You need to install pyOpenGL, e.g. on Ubuntu "sudo apt-get install python-opengl"

3. You need to install numpy, e.g. on Ubuntu "sudo apt-get install python-numpy"

4. The playback will be faster if you build the included bitunpack module. Do. "python setup.py build". Then either link or copy the bitunpack binary from the build sub-directory to the same place as the script

Usage
-----

-/mlrawviewer.py <path_to_ML_RAW_or_MLV_base_file> [<wav_file_to_play_along_with_video>] [<output_file_name_for_encoding>]

If the Raw file is the first in a numbered set, the other files will be used automatically.
Playback will happen at around 25FPS or the closest achievable if constrained by disk read speed.

Encoding is made using the version of "ffmpeg" found either in the scritp directory or on the path. Currently it tries to encode
with the "prores_ks" codec, which may only be found in newer versions of (real) ffmpeg. You can download a suitable (e.g. static) version of ffmpeg from http://www.ffmpeg.org/download.html

Keys
----

SPACE - Pause/Unpause playback

TAB - Toggle between initial windowed mode and fullscreen

LEFT/RIGHT CURSOR - Jump back/forward 1 second

COMMA(,)/PERIOD(.) - Nudge back/forward by 1 frame (works best when paused)

UP/DOWN CURSOR - Increase/decrease brightness

0, 1, 2, 3 - Change White Balance

7, 4 - Change red multiplier up and down by 0.1

8, 5 - Change green multiplier up and down by 0.1

9, 6 - Change blue multiplier up and down by 0.1

D - Toggle between drop-frame mode allowing synchronised audio playback, or sequential frame mode and no audio

Q - Toggle between fast and high-quality demosaicing for playback (high-quality is used automatically when paused)

A - Toggle anamorphic aspect to take into account the 1.4x squeeze from shooting 50p/60p

E - Start encoding from the current frame. If no file name was supplied, will use the source name with ".MOV" appended.

T - Toggle between linear color, global tone mapping, and log mapping

O/P - Change to previous/next MLV/RAW file in same directory as current file

V/B/N/M - Slide audio file start by -0.5,-0.05,+0.05,+0.5 seconds
